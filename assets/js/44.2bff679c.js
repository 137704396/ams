(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1076:function(t,e,a){"use strict";a.r(e);var i,s=a(240),n=(a(239),a(322),a(42),a(94),a(29),a(60),a(147),a(96)),r={resources:{data:{fields:{url:{type:"text",label:"地址",props:{placeholder:"如： http://localhost:9528/examples/admin/mock/read.json"}},and:{type:"text",ctx:"view"},text:{type:"textarea",props:{rows:10,placeholder:'如： {"data":{"select": "aaaa.bbb", "text": "hello"}}'},label:"数据"},ans:{label:"资源配置：",type:"textarea",props:{rows:10}}}}},blocks:{buttons:{type:"form",ctx:"view",events:{submit:"edit.submit",format:"edit.format",clear:"edit.clear"},operations:{submit:{label:"生成",type:"button",props:{type:"primary"}},format:{label:"格式化",type:"button"},clear:{label:"清空",type:"button"}}},edit:{type:"form",ctx:"edit",resource:"data",data:{and:"或"},style:{width:"100%"},actions:{getFields:(i=Object(n.a)(regeneratorRuntime.mark(function t(){var e,a,i,s,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(e=JSON.parse(this.data.text)).data&&(e=e.data),a=[],Object.keys(e).forEach(function(t){a.push({name:t,type:"text"})}),t.next=7,this.$ams.request({url:"http://vip.com/getBayes",method:"post",data:{data:JSON.stringify(a)},withCredentials:!1});case 7:i=t.sent,s={},i.data.res.forEach(function(t){s[t.name]={label:t.name,type:t.res[0]}}),n={key:"id",api:{prefix:"/",read:""},fields:s},this.data.ans=JSON.stringify(n,null,4),delete(r=this.$ams).resources.new,r.resource("new",n),this.callAction("@preview.update"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),this.data.ans=t.t0;case 21:case"end":return t.stop()}},t,this,[[0,18]])})),function(){return i.apply(this,arguments)}),submit:function(){var t=this;this.data.url?this.$ams.request({url:this.data.url,withCredentials:!1}).then(function(e){e.data.list&&Array.isArray(e.data.list)&&e.data.list.length>0?t.data.text=JSON.stringify(e.data.list[0],null,4):t.data.text=JSON.stringify(e.data,null,4),t.callAction("edit.getFields")}):this.data.text?this.callAction("edit.getFields"):this.data.ans="请输入url或者数据"},format:function(){try{if(this.data.text){var t=JSON.parse(this.data.text);this.data.text=JSON.stringify(t,null,4)}}catch(t){this.data.ans=t}},clear:function(){this.data.text="",this.data.url="",this.data.ans="",delete ams.resources.new,this.callAction("@preview.update")}}},preview:{type:"form",ctx:"edit",resource:"new",style:{width:"100%",marginTop:"40px",paddingTop:"40px",borderTop:"1px solid #eaecef"},actions:{update:function(){console.log("update"),this.initBlock()}}}}},l={data:function(){return{init:!1}},mounted:function(){s.default&&s.default.blocks&&s.default.blocks.convent?this.init=!0:(s.default.block("convent",r),this.init=!0)}},o=a(13),d=Object(o.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return this.init?e("ams-block",{staticClass:"demo convent",attrs:{name:"convent"}}):this._e()},[],!1,null,null,null);e.default=d.exports},239:function(t,e,a){"use strict";var i=a(0),s=(a(246),a(244)),n=a.n(s),r=a(240),l=a(251),o=a(247),d=a.n(o),c=(a(248),a(249)),u=a.n(c),p=a(250),f=a.n(p);i.default.use(n.a),i.default.use(r.default),console.log("ams init config"),i.default.use(u.a),i.default.use(f.a),"undefined"!=typeof window&&(window.Vue=i.default),i.default.use(l.a,{languages:{javascript:d.a}}),r.default.config({resource:{api:{withCredentials:!1}}})},322:function(t,e,a){var i=a(2);i(i.S,"Array",{isArray:a(149)})}}]);